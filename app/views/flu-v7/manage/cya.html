<!-- Use this page as the index for your project -->

<!-- ADDING CUSTOM CSS - Add your custom CSS or Sass in /app/assets/sass/main.scss -->

<!-- Extends the layout from /views/layout.html -->
{% extends 'layout-flu.html' %}<!-- 
  In /views/layout.html you can:
    - change the header and footer 
    - add custom CSS and JavaScript
-->

<!-- Set the page title -->
{% block pageTitle %}
Book vaccinations prototype
{% endblock %}

<!-- For adding a breadcrumb -->
<!-- Code examples can be found at https://service-manual.nhs.uk/design-system/components/breadcrumbs -->
{% block beforeContent %}
<a class="nhsuk-back-link" href="javascript:history.back()">Back</a>
{% endblock %}

<!-- For adding a back link -->
<!-- Code examples can be found at https://service-manual.nhs.uk/design-system/components/back-link -->
{% block outerContent %}
{% endblock %}

<!-- For adding page content -->
<!-- Page layout code can be found at https://service-manual.nhs.uk/design-system/styles/layout -->
{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">

      <!-- Change the page title here -->

      <!-- Add your content here -->
      <!-- Styles and components can be found at https://service-manual.nhs.uk/design-system -->


        <form action="booking-complete" method="get" class="form">

            <h1 class="nhsuk-heading-xl">
                Check your booking
              </h1>

          <dl class="nhsuk-summary-list">  
            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">
               {{ data['first-name'] | default('John') }} {{ data['last-name'] | default('Doe') }}
              </dt>
              <dd class="nhsuk-summary-list__value">
               {{data['hour'] | default('10') }}{{data['time'] | default(':30am') }}<br><span id="vaccine-display"></span>
              </dd>
          
              <dd class="nhsuk-summary-list__actions">
                <a href="#">
                  Change time<span class="nhsuk-u-visually-hidden"> for {{ data['first-name'] | default('John') }} {{ data['last-name'] | default('Doe') }}</span>
                </a>
              </dd>
            </div>


          </dl>     

    
    
              <h2 class="nhsuk-heading-m">Appointment</h2>
          <dl class="nhsuk-summary-list">  
            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">
                Site location
              </dt>
              <dd class="nhsuk-summary-list__value">
                Benjamin Chemist<br>190 S/Newington High st<br>Stoke Newington<br>London<br>N16 7JD
              </dd>
          
              <dd class="nhsuk-summary-list__actions">
          
                <a href="#">
                  Change<span class="nhsuk-u-visually-hidden"> contact information</span>
                </a>
          
              </dd>
          
            </div>

            <div class="nhsuk-summary-list__row">
                <dt class="nhsuk-summary-list__key">
                  Date
                </dt>
                <dd class="nhsuk-summary-list__value">
                  {{data['date']}}
                </dd>
            
                <dd class="nhsuk-summary-list__actions">
            
                  <a href="choose-date">
                    Change<span class="nhsuk-u-visually-hidden"> appointment date</span>
                  </a>
            
                </dd>
            
              </div>  
          
          </dl>       

          <h2 class="nhsuk-heading-m">Contact details</h2>
          <dl class="nhsuk-summary-list">


            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">
                Can we send confirmation and reminder messages?
              </dt>
              <dd class="nhsuk-summary-list__value">
               Yes
              </dd>
          
              <dd class="nhsuk-summary-list__actions">
          
                <a href="confirmation-messages">
                  Change<span class="nhsuk-u-visually-hidden"> email address</span>
                </a>
          
              </dd>
          
            </div>

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">
                Email address
              </dt>
              <dd class="nhsuk-summary-list__value">
                <p><span id="email-display"></span></p>
              </dd>
          
              <dd class="nhsuk-summary-list__actions">
          
                <a href="contact-details">
                  Change<span class="nhsuk-u-visually-hidden"> email address</span>
                </a>
          
              </dd>
          
            </div>

            <div class="nhsuk-summary-list__row">
                <dt class="nhsuk-summary-list__key">
                  Mobile number
                </dt>
                <dd class="nhsuk-summary-list__value">
                  <span id="mobile-display"></span>
                </dd>
            
                <dd class="nhsuk-summary-list__actions">
            
                <a href="contact-details">
                    Change<span class="nhsuk-u-visually-hidden"> mobile number</span>
                  </a>
            
                </dd>
            
              </div>
  

  
  
          
          </dl>       

        <button class="nhsuk-button" data-module="nhsuk-button" type="submit">
          Complete booking
        </button>
    </form>



      
      </div>
      <!-- End of content -->

      <script>
        document.addEventListener("DOMContentLoaded", function () {
            let dob = localStorage.getItem("dob");
            let age = localStorage.getItem("age");
    
            if (dob) {
                document.getElementById("dobDisplay").textContent = `${dob}`;
                document.getElementById("ageDisplay").textContent = `Your age: ${age}`;
            }
        });
    </script>
    
    </div>
  </div>
  <script>
  // Display stored DOB on page load
  document.getElementById("dob-display").innerText = localStorage.getItem("dob1") || 'Unknown';
  document.getElementById("dob-display2").innerText = localStorage.getItem("dob2") || 'Unknown';

</script>

  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const params = new URLSearchParams(window.location.search);
      const email = decodeURIComponent(params.get('email') || '');
      const mobile = decodeURIComponent(params.get('mobile') || '');

      document.getElementById('email-display').textContent = email || 'Not provided';
      document.getElementById('mobile-display').textContent = mobile || 'Not provided';
    });
  </script>

  <script>
document.addEventListener("DOMContentLoaded", function () {
  let vaccineChoice = localStorage.getItem("vaccineChoice");

  // Always ensure a valid value
  if (!vaccineChoice || vaccineChoice.trim() === "" || vaccineChoice === "COVID-19 and RSV-hidden") {
    vaccineChoice = "Flu";
    localStorage.setItem("vaccineChoice", vaccineChoice);
  }

  document.getElementById("vaccine-display").textContent = vaccineChoice;
});
</script>


{% endblock %}
